<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://ebrahimhamidi.com/feed.xml" rel="self" type="application/atom+xml"/><link href="https://ebrahimhamidi.com/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-11-30T01:55:10+00:00</updated><id>https://ebrahimhamidi.com/feed.xml</id><title type="html">Ebrahim Hamidi</title><subtitle>Ebrahim Hamidi&apos;s personal website. </subtitle><entry><title type="html">Transfer files with Box and lftp</title><link href="https://ebrahimhamidi.com/blog/2022/lftp/" rel="alternate" type="text/html" title="Transfer files with Box and lftp"/><published>2022-08-13T00:00:00+00:00</published><updated>2022-08-13T00:00:00+00:00</updated><id>https://ebrahimhamidi.com/blog/2022/lftp</id><content type="html" xml:base="https://ebrahimhamidi.com/blog/2022/lftp/"><![CDATA[<h3 id="outline">Outline</h3> <hr/> <ol> <li><a href="#purpose">Purpose</a></li> <li><a href="#setup">Setup and Configuration</a></li> <li><a href="#use-lftp">Using <code class="language-plaintext highlighter-rouge">lftp</code></a></li> </ol> <p><a name="purpose"></a></p> <h3 id="purpose">Purpose</h3> <hr/> <p>Transfer Box cloud storage files with the command line tool <code class="language-plaintext highlighter-rouge">lftp</code>. <code class="language-plaintext highlighter-rouge">lftp</code> is more reliable than using a web browser. It automatically handles errors, can restart interrupted transfers, and can transfer both large files and large amounts of files. <code class="language-plaintext highlighter-rouge">lftp</code> is also useful when there is no GUI available such as in an HPC environment.</p> <p><a name="setup"></a></p> <h3 id="setup-and-configuration">Setup and Configuration</h3> <hr/> <p>First install <a href="https://lftp.yar.ru"><code class="language-plaintext highlighter-rouge">lftp</code></a> on your local machine with your favorite package manager:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>lftp
</code></pre></div></div> <p>Then update the <code class="language-plaintext highlighter-rouge">lftp</code> config file to force strict security options.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/.lftp
<span class="nv">$ </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="se">\</span>
<span class="s1">'set ftps:initial-prot ""
set ftp:ssl-force true
set ftp:ssl-protect-data true'</span> <span class="o">&gt;&gt;</span> ~/.lftp/rc
</code></pre></div></div> <p>If your Box account uses <a href="https://en.wikipedia.org/wiki/Single_sign-on">SSO</a> you must create a unique password to use <code class="language-plaintext highlighter-rouge">lftp</code>. Most university Box accounts use SSO. Set a unique password from your <a href="https://box.com/account">Box account settings</a>.</p> <div class="row justify-content-center"> <div class="col-8"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/box_unique_pw-480.webp 480w,/assets/img/box_unique_pw-800.webp 800w,/assets/img/box_unique_pw-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/box_unique_pw.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Screenshot of the unique password Box account setting. </div> <p><a name="use-lftp"></a></p> <h3 id="using-lftp">Using <code class="language-plaintext highlighter-rouge">lftp</code></h3> <hr/> <p>Login with your Box unique password and start an <code class="language-plaintext highlighter-rouge">lftp</code> shell with the command below. Replace [Box email address] with the “Default Email Address” shown in your Box account settings.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>lftp ftps://[Box email address]@ftp.box.com
</code></pre></div></div> <p>Upload a local directory to Box (defaults to top-level Box directory without second path)</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lftp foo@ftp.box.com:~&gt; mirror <span class="nt">-R</span> /path/to/local/directory /path/to/Box/directory
</code></pre></div></div> <p>Download a Box directory to your local machine</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lftp foo@ftp.box.com:~&gt; mirror /path/to/Box/directory /path/to/local/directory
</code></pre></div></div> <p>Upload a local file to Box (defaults to top-level Box directory without <code class="language-plaintext highlighter-rouge">-o</code> flag and argument)</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lftp foo@ftp.box.com:~&gt; put /path/to/local.file <span class="nt">-o</span> /path/to/Box/directory
</code></pre></div></div> <p>Download a Box file to your local machine (defaults to local $HOME directory without <code class="language-plaintext highlighter-rouge">-o</code> flag and argument)</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lftp foo@ftp.box.com:~&gt; get /path/to/Box.file <span class="nt">-o</span> /path/to/local/directory
</code></pre></div></div> <p>Some more useful <code class="language-plaintext highlighter-rouge">lftp</code> shell commands:</p> <table> <tbody> <tr> <td>  </td> <td><font size="+1"><b>Command</b></font></td> <td> </td> <td> </td> <td><font size="+1"><b>Description</b></font></td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">ls</code></td> <td> </td> <td> </td> <td>list files in current Box directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">!ls</code></td> <td> </td> <td> </td> <td>list files in current local directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">cd</code></td> <td> </td> <td> </td> <td>change Box directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">lcd</code></td> <td> </td> <td> </td> <td>change local directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">pwd</code></td> <td> </td> <td> </td> <td>print path to current Box directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">lpwd</code></td> <td> </td> <td> </td> <td>print path to current local directory</td> </tr> <tr> <td>  </td> <td><code class="language-plaintext highlighter-rouge">mkdir</code></td> <td> </td> <td> </td> <td>make a folder on Box</td> </tr> </tbody> </table> <p><br/> Check out <a href="https://lftp.yar.ru/lftp-man.html">this page</a> or run <code class="language-plaintext highlighter-rouge">man lftp</code> in your terminal for a comprehensive list of commands and options. This tutorial borrows heavily from the <code class="language-plaintext highlighter-rouge">lftp</code> <a href="https://barricklab.org/twiki/bin/view/Lab/CommandLineBox">guide from the Barrick Lab </a>.</p>]]></content><author><name></name></author><category term="tutorials"/><category term="lftp"/><category term="Box"/><summary type="html"><![CDATA[Use lftp to reliably transfer large amounts of data to and from your Box account.]]></summary></entry></feed>